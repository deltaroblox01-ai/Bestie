<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Happy Bestfriend Day</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div class="overlay"></div>

  <!-- Splash Screen -->
  <div id="startScreen">
    <h2>ðŸŒŒ Happy Bestfriend Day ðŸŒŒ</h2>
    <p>Tap untuk memulai permainan</p>
    <button id="startBtn">ðŸ’– Mulai ðŸ’–</button>
  </div>

  <!-- Game + Pesan -->
  <div id="gameContent" style="display:none;">
    <div class="hud">
      <span>Score: <span id="score">0</span></span>
    </div>

    <h1>Happy Bestfriend Day! ðŸŒŒ</h1>
    <p class="message"></p>
    <button id="musicBtn">ðŸ”Š Pause Music</button>
  </div>

  <!-- Musik dan efek suara -->
  <audio id="bgMusic" loop>
    <source src="https://cdn.pixabay.com/download/audio/2022/10/05/audio_0e4f06b376.mp3?filename=peaceful-piano-118106.mp3" type="audio/mpeg">
  </audio>
  <audio id="catchSound">
    <source src="https://cdn.pixabay.com/download/audio/2022/10/20/audio_8a8edc5d8a.mp3?filename=click-pop-2-189906.mp3" type="audio/mpeg">
  </audio>

  <script>
    const startBtn = document.getElementById('startBtn');
    const startScreen = document.getElementById('startScreen');
    const gameContent = document.getElementById('gameContent');
    const music = document.getElementById('bgMusic');
    const catchSound = document.getElementById('catchSound');
    const btn = document.getElementById('musicBtn');
    const scoreEl = document.getElementById('score');
    let score = 0;

    // Teks pesan
    const text = `Selamat Hari Persahabatan!\n
Terima kasih selalu ada untukku.\n
Kamu adalah bintang di malamku.\n
Semoga persahabatan ini selamanya. ðŸ’–`;

    const messageEl = document.querySelector('.message');
    let idx = 0;

    function typeEffect() {
      if (idx < text.length) {
        messageEl.innerHTML += text[idx] === "\n" ? "<br>" : text[idx];
        idx++;
        setTimeout(typeEffect, 60);
      }
    }

    // Mulai game
    startBtn.addEventListener('click', () => {
      startScreen.style.display = 'none';
      gameContent.style.display = 'flex';

      music.play().catch(()=>{});
      btn.textContent = 'ðŸ”Š Pause Music';

      typeEffect();
      spawnHearts();
    });

    // Tombol musik
    btn.addEventListener('click', () => {
      if (music.paused) {
        music.play();
        btn.textContent = 'ðŸ”Š Pause Music';
      } else {
        music.pause();
        btn.textContent = 'ðŸ”‡ Play Music';
      }
    });

    // ---- Mini-game: Tangkap Hati ----
    function spawnHearts() {
      setInterval(() => {
        const heart = document.createElement('div');
        heart.classList.add('falling-heart');
        heart.innerHTML = 'ðŸ’–';
        heart.style.left = Math.random() * 90 + 'vw';
        document.body.appendChild(heart);

        // Klik untuk mendapatkan score
        heart.addEventListener('click', () => {
          score++;
          scoreEl.textContent = score;
          catchSound.currentTime = 0;
          catchSound.play();
          heart.remove();
        });

        // Hapus jika jatuh
        setTimeout(() => heart.remove(), 5000);
      }, 1500);
    }
  </script>

</body>
</html>
